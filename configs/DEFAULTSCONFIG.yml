# Default configuration for MTG Card Generator
# This file contains all default values used by the application
# User configs will override these values

square_config:
  total_cards: 60 # Overridden if pack_builder is enabled
  concurrency: 4
  sleepy_time: 0.5
  output_dir: "output"
  

http_config:
  timeout: 60
  retries: 3
  retry_delay: 10
  polling_interval: 1

api_params:
  generate_image_prompt: false
  creative: false
  include_explanation: false
  image_model: "dall-e-3" # options: dall-e-2, dall-e-3, none
  model: "gpt-41"


mtgcg_mse_config:
  image_method: "download" # options: none, localSD, download

set_params:
  set: "Default Set"
  themes:
    - "Magic and mystery"
    - "Heroic adventures"
    - "Ancient powers"
    - "Mystical creatures"
    - "Epic battles"
    - "Forgotten realms"
    - "Elemental forces"
    - "Divine intervention"
    - "Dark secrets"
    - "Legendary artifacts"

pack_builder:
  enabled: false
  pack: [
    {
      "rarity": "common",
      "count": 7
    },
    {
      "rarity": "uncommon",
      "count": 3
    },
    {
      "rarity": {
        "rare": 6,
        "mythic": 1
      },
      "count": 1
    },
    {
      "count": 2
    },
    {
      "type": "basic land",
      "count": 1
    },
    {
      "type": "Non-playable",
      "function_tags": {
        "Fun card": 33,
        "Non-playable": 33,
        "Unplayable": 33,
        "Player Aid": 33,
        "Token": 33
      },
      "count": 1
    }
  ]

skeleton_params:
  types_mode: normal  # normal | play
  canonical_card_types:
    - "creature"
    - "artifact creature"
    - "planeswalker"
    - "instant"
    - "sorcery"
    - "enchantment"
    - "saga"
    - "battle"
    - "land"
    - "basic land"
    - "artifact"
    - "kindred"
  ### Color baselines per mode (NEW SCHEMA: no legacy _default)
  card_types_color_defaults:
      normal:
        white:
          # Slight bump to creature share to top of white's typical range; instant trimmed.
          creature: 51
          artifact creature: 1  # counted inside effective creature share
          planeswalker: 1
          instant: 9
          sorcery: 9
          enchantment: 14
          saga: 3
          battle: 1
          land: 5
          basic land: 4
          artifact: 1
          kindred: 1
        blue:
          # Lower creature share; shift weight into instants/sorceries; slight enchantment trim.
          creature: 40
          artifact creature: 1
          planeswalker: 1
          instant: 18
          sorcery: 15
          enchantment: 6
          saga: 2
          battle: 2
          land: 5
          basic land: 4
          artifact: 4
          kindred: 2
        black:
          creature: 48
          artifact creature: 1
          planeswalker: 1
          instant: 10
          sorcery: 13
          enchantment: 8
          saga: 2
          battle: 2
          land: 5
          basic land: 4
          artifact: 3
          kindred: 3
        red:
          # Shift a little from creatures into burn (instants/sorceries).
          creature: 45
          artifact creature: 1
          planeswalker: 1
          instant: 14
          sorcery: 17
          enchantment: 4
          saga: 2
          battle: 2
          land: 5
          basic land: 4
          artifact: 3
          kindred: 2
        green:
          creature: 55
          artifact creature: 1
          planeswalker: 1
          instant: 6
          sorcery: 9
          enchantment: 11
          saga: 2
          battle: 2
          land: 5
          basic land: 4
          artifact: 2
          kindred: 2
        colorless:
          # Moderate artifact saturation; spread a little into other minor types & lands.
          creature: 4
          artifact creature: 24
          planeswalker: 1
          instant: 1
          sorcery: 1
          enchantment: 1
          saga: 2
          battle: 2
          land: 9
          basic land: 1   # ensure >0; took 1 from artifact below
          artifact: 53
          kindred: 1
      play:
        # PLAY mode: tuned to approximate a 40-card Limited deck heuristic inside a monocolor slice.
        # Approx targets: Lands ~40%, Creatures (incl artifact creature) ~30â€“42 depending on color, remainder spells.
        white:
          creature: 36.5
          artifact creature: 1
          planeswalker: 0.4
          instant: 8.5
          sorcery: 6.6
          enchantment: 5
          saga: 0.6
          battle: 0.4
          land: 24
          basic land: 16
          artifact: 0.6
          kindred: 0.4
        blue:
          creature: 31
          artifact creature: 1
          planeswalker: 0.5
          instant: 13.5
          sorcery: 9
          enchantment: 3
          saga: 0.5
          battle: 0.5
          land: 24
          basic land: 16
          artifact: 0.5
          kindred: 0.5
        black:
          creature: 37
          artifact creature: 1
          planeswalker: 0.4
          instant: 9
          sorcery: 9
          enchantment: 2
          saga: 0.6
          battle: 0.6
          land: 23
          basic land: 16
          artifact: 0.7
          kindred: 0.7
        red:
          creature: 35
          artifact creature: 1
          planeswalker: 0.4
          instant: 12
          sorcery: 10
          enchantment: 1
          saga: 0.4
          battle: 0.4
          land: 23
          basic land: 16
          artifact: 0.4
          kindred: 0.4
        green:
          creature: 41
          artifact creature: 1
          planeswalker: 0.4
          instant: 5
          sorcery: 6
          enchantment: 5
          saga: 0.6
          battle: 0.6
          land: 23
          basic land: 16
          artifact: 0.7
          kindred: 0.7
        colorless:
          # Colorless in deck context: small share; lands + utility artifacts.
          creature: 2
          artifact creature: 10
          planeswalker: 0.3
          instant: 2.5
          sorcery: 2.5
          enchantment: 1.5
          saga: 1.2
          battle: 0.8
          land: 24
          basic land: 16
          artifact: 33
          kindred: 6.2
  # User overlays (applied AFTER selecting per-mode baselines). Optional.
  # _default applies to ALL colors; per-color keys override after that.
  colors:
    - "white"
    - "blue"
    - "black"
    - "red"
    - "green"
    - "colorless"
  colors_weights:
    white: 16.67
    blue: 16.67
    black: 16.67
    red: 16.67
    green: 16.67
    colorless: 16.65
  color_bleed_factor: 20
  mana_values:
    - "0"
    - "1"
    - "2"
    - "3"
    - "4"
    - "5"
    - "6"
    - "7"
    - "8+"
  mana_curves:
    white: [1, 10, 27, 23, 19, 12, 6, 1, 1]
    blue: [1, 9, 25, 22, 20, 14, 7, 1, 1]
    black: [1, 8, 27, 25, 18, 12, 5, 2, 2]
    red: [1, 12, 28, 23, 18, 11, 5, 1, 1]
    green: [1, 9, 22, 22, 20, 15, 6, 3, 2]
    colorless: [3, 12, 25, 23, 19, 10, 5, 2, 1]
    default: [4, 12, 22, 22, 18, 12, 6, 3, 1]
  rarities_weights:
    common: 63.6
    uncommon: 27.3
    rare: 7.8
    mythic: 1.3
  function_tags:
    ramp or mana fixing: 15
    draw or card advantage: 15
    removal or control: 10
    board wipe or mass removal: 5
    activated ability: 5
    Flying or other evasion: 5
    simple or straightforward: 10
    vanilla or no abilities: 5
  land_color_bleed_overlinear: 2
  legend_mutation_factor: 1
  rarity_based_mutation:
    common: [1, 12]
    uncommon: [2, 12]
    rare: [4, 12]
    mythic: [8, 12]
  type_mutation_factor: 10
  wildcard_mutation_factor: 5
  wildcard_supertype: true
  tags_maximum: 2
  mutation_chance_per_theme: 20
  fixed_amount_themes: 2
  power_level: 7.5
  standard_deviation_powerLevel: 0.5
  power_level_rarity_skew: 0.5
  rarity_to_skew:
    common: -2
    uncommon: -1
    rare: 1
    mythic: 2

SD_config:
  max_tag_weight: 2.5
  forge_url_base: "http://127.0.0.1:7860"
  sd_output_dir: "forge-out"
  base_output_dir: "output"
  random_lora_weights: true
  lora_weight_standard_deviation: 0.35
  apply_lora_chance: 50
  use_special_tags: true
  varying_special_tags_weight: true
  model_swap_chance: 33
  max_retries: 3
  retry_delay: 10
  sleepy_time: 0
  randomise_negative_prompt: true
  chance_no_negative_prompt: 50
  special_tags:
    Fantasy World:
      weight: 1.2
      chance: 100
    NSFW:
      weight: 1.5
      chance: 5
    Gore:
      weight: 1.5
      chance: 5
    Porn:
      weight: 1.5
      chance: 5
    Hentai:
      weight: 1.5
      chance: 5
  image_options:
    # FLUX model - Fast generation with good quality
    - name: FLUX
      weight: 10.0
      option_params:
        model: FLUX1DEV_HYPERNF4_FLUX1DEVBNB_FLUX1DEVHYPERNF4
        loras:
          FantasyWorldPonyV2: 0.1
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.1
        steps: 24
        cfg_scale: 1
        distilled_cfg_scale: 3.5
        width: 1024
        height: 748
        sampler_name: Euler
        scheduler: Simple
        seed: -1
        n_iter: 1
        batch_size: 1
    
    # Illustrious model - High quality anime/illustration style
    - name: PILLU
      weight: 1.0
      option_params:
        model: PREFECT_ILLUSTRIOUS_XL_V20P
        loras:
          FantasyWorldPonyV2: 0.1
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.85
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
    
    # Pony model - Versatile fantasy art generation
    - name: PEPONY
      weight: 0.5
      option_params:
        model: PREFECT_PONY_XL_V50
        loras:
          FantasyWorldPonyV2: 0.85
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.1
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
        negative_prompt: "blurry, low quality, watermark, text, signature, cropped, extra limbs, disfigured, bad anatomy"
    
    # Real Dream model - Realistic fantasy art
    - name: REDREAM
      weight: 1.0
      option_params:
        model: REAL_DREAM_SDXL_PONY15
        loras:
          FantasyWorldPonyV2: 0.1
          fantasyV1.1: 0.85
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.1
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
        negative_prompt: "blurry, low quality, watermark, text, signature, cropped, extra limbs, disfigured, bad anatomy"
    
    # Realism Yogi model - Photorealistic style
    - name: REALISM_YOGI
      weight: 0.5
      option_params:
        model: REALISM_BY_STABLE_YOGI_V40FP16
        loras:
          FantasyWorldPonyV2: 0.1
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.85
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
        negative_prompt: "blurry, low quality, watermark, text, signature, cropped, extra limbs, disfigured, bad anatomy"
    
    # Unstable Diffusers model - Enhanced D&D style
    - name: UNSTABLE_DIFFUSERS
      weight: 2.0
      option_params:
        model: SDXL_UNSTABLE_DIFFUSERS_V9_DIVINITYMACHINEVAE
        loras:
          FantasyWorldPonyV2: 0.1
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.85
          Dark_Fantasy_1.5_IL: 0.1
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
        negative_prompt: "blurry, low quality, watermark, text, signature, cropped, extra limbs, disfigured, bad anatomy"
    
    # NSFW model - Adult content (adjust weights/remove as needed)
    - name: WAI_NSFW_ILLUSTRIOUS
      weight: 0.1  # Low weight by default
      option_params:
        model: WAI_NSFW_ILLUSTRIOUS_V110
        loras:
          FantasyWorldPonyV2: 0.85
          fantasyV1.1: 0.1
          dungeons_and_dragons_xl_v3: 0.1
          Dark_Fantasy_1.5_IL: 0.1
        steps: 128
        cfg_scale: 5
        sampler_name: "DPM++ 2M SDE"
        scheduler: Simple
        width: 1024
        height: 748
        seed: -1
        n_iter: 1
        batch_size: 1
        negative_prompt: "blurry, low quality, watermark, text, signature, cropped, extra limbs, disfigured, bad anatomy"


